<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>事件委派</title>
	<link rel="stylesheet" href="css/index.css">
	<script src="js/function.js"></script>
</head>
<body>
	<div class="box">
		<table>
			<tr>
				<th>姓名</th>
				<th>性别</th>
				<th>年龄</th>
				<th>籍贯</th>
				<th>电话</th>
				<th>操作</th>
			</tr>
			<tr>
				<td>张三</td>
				<td>男</td>
				<td>18</td>
				<td>太原</td>
				<td>123456</td>
				<td class="del"><button class="del_btn">删除</button></td>
			</tr>
			<tr>
				<td>张三</td>
				<td>男</td>
				<td>18</td>
				<td>太原</td>
				<td>123456</td>
				<td class="del"><button class="del_btn">删除</button></td>
			</tr>
			<tr>
				<td>张三</td>
				<td>男</td>
				<td>18</td>
				<td>太原</td>
				<td>123456</td>
				<td class="del"><button class="del_btn">删除</button></td>
			</tr>
			<tr>
				<td>张三</td>
				<td>男</td>
				<td>18</td>
				<td>太原</td>
				<td>123456</td>
				<td class="del"><button class="del_btn">删除</button></td>
			</tr>
		</table>
		<button class="add">添加</button>
		<div class="clear"></div>
	</div>
</body>
</html>
<script>
	$(function(){
		let table = $('tbody')[0];
		let btn = $('.add')[0];
		//console.log(table,btn)
		table.ondblclick = function(e){
			let element = e.target;
			if(element.nodeName == 'TD' && element.className != 'del'){
				let old = element.innerText;
				element.innerText = "";

				let inputs = document.createElement('input');
				inputs.style.cssText = 'width:100%; text-align:center;';
				inputs.value = old;
				element.appendChild(inputs);

				inputs.onblur = function(){
					let newv = inputs.value;
					element.removeChild(inputs);
					element.innerText = newv;
				}
			}else if(element.className == 'del_btn'){
			 	let yes = confirm('执行此操作将无法挽回，您要执行吗？');
			 	if(yes == true){
			 		let trs = element.parentNode.parentNode;
				 	table.removeChild(trs);
			 	}else{
			 		return false;
			 	}
			 	
			}
		}
		btn.onclick = function(){
			// console.log(1)
			table.innerHTML = table.innerHTML + `
			<tr>
				<td></td>
				<td></td>
				<td></td>
				<td></td>
				<td></td>
				<td class="del"><button class="del_btn">删除</button></td>
			</tr>
			`;
		}
	})
</script>